#log-analysis
[![dependencies](https://david-dm.org/tabspace/log-analysis.png)](http://david-dm.org/tabspace/log-analysis)

通过自定义日志模板分析日志文件，可自由搭配数据生成图表。

## Guide

0. 这是一个 grunt 插件, 所以你需要先安装 [Grunt](http://gruntjs.com/) , 参考 [Grunt Getting Started](http://gruntjs.com/getting-started) 

0. 安装本插件

	```shell
	npm install log-analysis --save-dev
	```

0. 把数据文件 data.txt 存放到当前目录

	配置 data.txt 数据如下，确保文件没有空行
	
	```txt
	1
	2
	3
	```

0. 用**chrome**浏览器打开 node_modules/log-analysis/index.html 开始进行数据分析

0. 在**数据**选项卡，点击**数据源**旁边的**选择文件**，选择 data.txt，然后点击**添加数据源** ， 可以见到列表中添加了一个数据源卡片，点击**显示列表**可以看到当前数据表格。**index**为行序号，**value**为每行数据的值

0. 在过滤器栏输入过滤器名称:`测试`，点击**添加过滤器**，可以看到列表中有一个名称为`测试`的过滤器卡片被添加

0. 点击过滤器卡片的**显示配置**，点击**添加入口数据**, 在**变量名**位置填写：`data`，在**选择数据**位置填写数据源名称：`C:\fakepath\data.txt`(不同操作系统数据源名称可能不一样，以数据源卡片上的名称为准). 点击**刷新**，可以看到数据表格与数据源卡片一样

0. 打开当前页面的**chrome**浏览器控制台，控制台切换到**console**界面，点击过滤器卡片上的**输出到控制台**，可以看到控制台提示: `数据输出为window.data`，在**浏览器控制台console面板**输入`data`并回车，可以看到**控制台**打印了当前入口数据为一个js数组：

	```js
	["1", "2", "3"]
	```

0. 在过滤器卡片的**请填写数据过滤代码**位置填写过滤器代码：

	```js
	return data.map(function(item){
		return {
			name: 'value',
			value: item * 2
		};
	});
	```
	点击过滤器卡片的**刷新**按钮，可以看到数据表格的更新。
	表格多出了`name`列。
	每个过滤器都应该输出JSON数组`[{},{},{}...]`以便后续组合分析。


0. 在顶部导航切换到**视图**选项卡，在**图表**栏填写图表名称`示例`，点击**添加图表**添加图表卡片

0. 在图表卡片点击**显示配置**, 点击**添加入口数据**，在**变量名**位置输入`data`，在**选择数据**位置输入过滤器名称`测试`，点击**刷新**, 可以看到数据表格显示到上面

0. 在**选择图表类型**下拉框选择`echarts/bar`类型，点击**刷新**，可以看到界面显示了柱状图

0. 在顶部导航切换到**控制**选项卡，在**导出配置文件**右边点击**保存**按钮，一个json文件会被下载下来

0. 把这个json文件复制到项目目录，在项目目录配置gruntfile.js:

	```js

	```







 




